---
title: "winbarを自作したよ"
pubDate: 2024-09-23
published: true
---

この記事は[Vim駅伝](https://vim-jp.org/ekiden/)2024年9月23日(月)の記事です。

前回の記事は [ysmb-wtsg](https://github.com/ysmb-wtsg) さんの「[【Neovim】vifでメソッド内を範囲選択する方法](https://qiita.com/ysmb-wtsg/items/2c9eaf444c60ca172588)」という記事でした。

次回の記事は 9月25日(水) に投稿される予定です。

---

## はじめに

前回、自分の書いた[記事](https://wagomu.me/blog/2024_08_26-vim-ekiden/)でstatuslineを隠すとかっこいいことに気がつき、隠したところ問題に気がつきました。
それは今開いているバッファのファイル名がわからなくなることです。

ということで、statuslineに表示していたファイル名をwinbarに表示させようと考え実装しました。
現状はファイル名のみ表示していますが、いずれは拡張性を持たせたいなと思っています。

コードはこちらです。
https://github.com/staticWagomU/dotvim/blob/main/nvim/lua/wwinbar.lua

## 実装について

下記条件に一致するバッファについてはwinbarを表示させないようにしています。

- ポップアップウィンドウ
- ファイル名がURI形式

こだわりポイントとしては、ファイル名の表示方法です。
仕事で開発をしていたり、luaを触っていると階層は違うがファイル名が同じものを複数開くということがあります。
そのような時にファイル名のみを表示するのではなく、ユニークになるディレクトリまで表示させるようにしています。

![](/images/blog/2024-09-23-vim-ekiden/Animation.gif)

## おわりに

今回はwinbarを自作しました。
たまにwinbarが表示されないのでバグがありそうですが、ひとまず満足いく形になったのでVim駅伝に公開しました。
